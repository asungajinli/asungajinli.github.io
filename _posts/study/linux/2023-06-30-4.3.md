---
layout: single
title: "예제"
categories: Study Computer Linux
tag: Linux Ubuntu NS3 RAN-AI
toc: true
sidebar:
  title: "Linux"
  nav: linux
  parent: true
author_profile: false
---

# hello-simulator.cc

<details style="margin:1em;">
<summary style="margin-bottom:0.5em;"><span style="color:#24A091;font-weight:bold;">hello-simulator.cc</span></summary>
<div markdown = "1">
  ```c++
  /* -*- Mode:C++; c-file-style:"gnu"; indent-tabs-mode:nil; -*- */
  /*
    * This program is free software; you can redistribute it and/or modify
    * it under the terms of the GNU General Public License version 2 as
    * published by the Free Software Foundation;
    *
    * This program is distributed in the hope that it will be useful,
    * but WITHOUT ANY WARRANTY; without even the implied warranty of
    * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    * GNU General Public License for more details.
    *
    * You should have received a copy of the GNU General Public License
    * along with this program; if not, write to the Free Software
    * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
    */

  #include "ns3/core-module.h"

  using namespace ns3;

  NS_LOG_COMPONENT_DEFINE ("HelloSimulator");

  int
  main (int argc, char *argv[])
  {
    NS_LOG_UNCOND ("Hello Simulator");
  }
  ```
</div>
</details>

# first.cc

기본 예제들을 모아놓은 /expample/tutorial 폴더 안에 first.cc 파일이 있다.<br>
first.cc 예제는 2개의 node를 point-to-point로 연결하는 시나리오이다.

<details style="margin:1em;">
<summary style="margin-bottom:0.5em;"><span style="color:#24A091;font-weight:bold;">first.cc</span></summary>
<div markdown = "1">

  ```c++
  /* -*- Mode:C++; c-file-style:"gnu"; indent-tabs-mode:nil; -*- */
  /*
  * 머리말 생략
  * GNU General Public License
  */

  #include "ns3/core-module.h"
  #include "ns3/network-module.h"
  #include "ns3/internet-module.h"
  #include "ns3/point-to-point-module.h"
  #include "ns3/applications-module.h"

  // Defailt Network Topology
  //
  //       10.1.1.0
  // n0 -------------- n1
  //    point-to-point
  //

  using namespace ns3;

  // 로그 출력
  NS_LOG_COMPONENT_DEFINE ("FirstScriptExample");

  int
  main (int argc, char *argv[])
  {
    CommandLine cmd;
    cmd.Parse (argc, argv);

    Time::SetResolution (Time::NS);
    LogComponentEnable ("UdpEchoClientApplication", LOG_LEVEL_INFO);
    LogComponentEnable ("UdpEchoServerApplication", LOG_LEVEL_INFO);

    NodeContainer nodes;
    nodes.Create (2);   // 노드 생성

    /*
    채널 생성
    구조: point-to-point
    */
    PointToPointHelper pointToPoint;
    pointToPoint.SetDeviceAttribute ("DataRate", StringValue ("5Mbps"));
    pointToPoint.SetChannelAttribute ("Delay", StringValue ("2ms"));

    /*
    NetDevice 생성
    */
    NetDeviceContainer devices;
    devices = pointToPoint.Install (nodes);   // node와 NetDevice 연결

    /*
    InternetStack 이란 TCP/IP 레이어와 같은 역할을 한다.
    */
    InternetStackHelper stack;
    stack.Install (nodes);

    /*
    전에 만든 point-to-point 링크를 노드에 연결하면 노드의 NIC가 반환된다.
    이렇게 반환된 NIC에 ip address를 설정해줄 수 있다.
    address.SetBase는 subnet id와 subnet mask를 주면 자동으로 NIC에 아이피를 할당해준다.
    */
    Ipv4AddressHelper address;
    address.SetBase ("10.1.1.0", "255.255.255.0");

    Ipv4InterfaceContainer interfaces = address.Assign (devices);

    /*
    노드에 설치할 서버 에플리케이션을 설정해준다.
    서버의 포트 번호는 9번을 사용한다.
    */
    UdpEchoServerHelper echoServer (9);

    ApplicationContainer serverApps = echoServer.Install (nodes.Get (1)); // 앞서 만든 2개의 노드중 2번째 노드에 설치한다.
    serverApps.Start (Seconds (1.0)); // 서버 에플리케이션은 1초에 시작하여
    serverApps.Stop (Seconds (10.0)); // 10초에 종료한다.

    /*
    노드에 설치할 클라이언트 에플리케이션을 설정해준다.
    이때 서버의 ip 주소와 포트 번호를 넘겨준다.
    */
    UdpEchoClientHelper echoClient (interfaces.GetAddress (1), 9); // ip 주소를 NIC에 할당할 때 interface 객체가 생기고 이 객체는 할당된 아이피 주소의 정보를 가지고 있다. 이 객체를 이용하여 서버의 ip 주소를 얻을 수 있다.
    echoClient.SetAttribute ("MaxPackets", UintegerValue (1)); // 서버에 보내는 패킷의 개수는 1로 한다.
    echoClient.SetAttribute ("Interval", TimeValue (Seconds (1.0))); // 서버에 패킷을 보내는 간격은 1초로 한다.
    echoClient.SetAttribute ("PacketSize", UintegerValue (1024)); // 서버로 보내지는 패킷의 크기는 1024 Byte로 한다.

    /*
    이렇게 만들어진 클라이언트 에플리케이션은 첫번째 노드에 설치한다.
    클라이언트 에플리케이션은 2초부터 시작하여 10초에 종료한다.
    */
    ApplicationContainer clientApps = echoClient.Install (nodes.Get (0));
    clientApps.Start (Seconds (2.0));
    clientApps.Stop (Seconds (10.0));

    /*
    위에서 설정한 시뮬레이션을 실행하고 시뮬레이션이 종료되면 프로그램을 종료한다.
    */
    Simulator::Run ();
    Simulator::Destroy ();
    return 0;
  }
  ```
</div>
</details>


---